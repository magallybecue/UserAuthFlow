flowchart TD
    A[ðŸ‘¤ UsuÃ¡rio acessa o app] --> B{ðŸ” EstÃ¡ logado?}
    
    B -->|NÃ£o| C[ðŸ“ Tela de Login/Registro]
    C --> C1[ðŸ”‘ Login via Gov.br]
    C --> C2[ðŸ“§ Cadastro com email]
    C1 --> D[ðŸ  Dashboard Principal]
    C2 --> D
    
    B -->|Sim| D
    
    D --> E[ðŸ“Š Visualiza estatÃ­sticas pessoais]
    E --> F[ðŸŽ¯ Escolhe aÃ§Ã£o principal]
    
    F --> G[ðŸ“¤ Novo Upload]
    F --> H[ðŸ“‹ HistÃ³rico de Uploads]
    F --> I[ðŸ” Busca Manual]
    F --> J[âš™ï¸ ConfiguraÃ§Ãµes]
    
    %% Fluxo de Novo Upload
    G --> G1[ðŸ“ Ãrea de Drag & Drop]
    G1 --> G2{ðŸ“„ Arquivo vÃ¡lido?}
    G2 -->|NÃ£o| G3[âŒ Erro: Formato invÃ¡lido]
    G3 --> G1
    G2 -->|Sim| G4[âœ… Preview do arquivo]
    G4 --> G5[ðŸ” Mapear colunas]
    G5 --> G6{ðŸ“‹ Mapeamento OK?}
    G6 -->|NÃ£o| G5
    G6 -->|Sim| G7[ðŸš€ Iniciar processamento]
    
    G7 --> G8[â³ Tela de processamento]
    G8 --> G9[ðŸ“Š Barra de progresso]
    G9 --> G10[ðŸ“ Log em tempo real]
    G10 --> G11{âœ… Processamento concluÃ­do?}
    G11 -->|NÃ£o| G9
    G11 -->|Sim| G12[ðŸ“ˆ EstatÃ­sticas do resultado]
    
    G12 --> R[ðŸ“‹ Tela de RevisÃ£o]
    
    %% Fluxo de RevisÃ£o
    R --> R1[ðŸ“Š Dashboard de resultados]
    R1 --> R2[ðŸ”¢ EstatÃ­sticas: Auto/Manual/NÃ£o encontrado]
    R2 --> R3[ðŸŽ›ï¸ Filtros e ordenaÃ§Ã£o]
    R3 --> R4[ðŸ“‹ Tabela interativa]
    
    R4 --> R5{ðŸŽ¯ AÃ§Ã£o do usuÃ¡rio}
    R5 --> R6[âœ… Aprovar item]
    R5 --> R7[âŒ Rejeitar item]
    R5 --> R8[ðŸ”„ Alterar match]
    R5 --> R9[ðŸ” Buscar alternativa]
    R5 --> R10[ðŸ“¤ Prosseguir para exportaÃ§Ã£o]
    
    R6 --> R4
    R7 --> R4
    R8 --> R8A[ðŸ” Modal de busca]
    R8A --> R8B{ðŸŽ¯ Encontrou material?}
    R8B -->|Sim| R8C[âœ… Confirmar novo match]
    R8B -->|NÃ£o| R8D[âŒ Marcar como nÃ£o encontrado]
    R8C --> R4
    R8D --> R4
    
    R9 --> R9A[ðŸ” Busca avanÃ§ada na base]
    R9A --> R9B[ðŸ“‹ Lista de sugestÃµes]
    R9B --> R9C{ðŸŽ¯ Selecionar sugestÃ£o?}
    R9C -->|Sim| R9D[âœ… Aplicar match]
    R9C -->|NÃ£o| R9E[ðŸ”™ Voltar Ã  revisÃ£o]
    R9D --> R4
    R9E --> R4
    
    %% Fluxo de ExportaÃ§Ã£o
    R10 --> E1[ðŸ“‹ Tela de exportaÃ§Ã£o]
    E1 --> E2[ðŸ‘ï¸ Preview dos dados finais]
    E2 --> E3[âš™ï¸ Configurar exportaÃ§Ã£o]
    E3 --> E4[ðŸ“ Selecionar colunas]
    E4 --> E5[ðŸ“Š Escolher formato: CSV/XLSX]
    E5 --> E6[â¬‡ï¸ Gerar e baixar arquivo]
    E6 --> E7[âœ… ConfirmaÃ§Ã£o de download]
    E7 --> E8[ðŸ’¾ Salvar no histÃ³rico]
    E8 --> D
    
    %% Fluxo de HistÃ³rico
    H --> H1[ðŸ“‹ Lista de uploads anteriores]
    H1 --> H2[ðŸ” Buscar/Filtrar histÃ³rico]
    H2 --> H3{ðŸŽ¯ AÃ§Ã£o no histÃ³rico}
    H3 --> H4[ðŸ‘ï¸ Visualizar detalhes]
    H3 --> H5[â¬‡ï¸ Re-download resultado]
    H3 --> H6[ðŸ”„ Reprocessar arquivo]
    H3 --> H7[ðŸ—‘ï¸ Excluir upload]
    
    H4 --> H4A[ðŸ“Š Detalhes do processamento]
    H4A --> H4B[ðŸ“‹ Ver itens processados]
    H4B --> D
    
    H5 --> H5A[â¬‡ï¸ Download do arquivo]
    H5A --> D
    
    H6 --> G8
    
    H7 --> H7A{â“ Confirmar exclusÃ£o?}
    H7A -->|Sim| H7B[ðŸ—‘ï¸ Item excluÃ­do]
    H7A -->|NÃ£o| H1
    H7B --> H1
    
    %% Fluxo de Busca Manual
    I --> I1[ðŸ” Campo de busca]
    I1 --> I2[ðŸŽ›ï¸ Filtros avanÃ§ados]
    I2 --> I3[ðŸ“‹ Categorias/Subcategorias]
    I3 --> I4[ðŸ” Executar busca]
    I4 --> I5[ðŸ“‹ Resultados da busca]
    I5 --> I6{ðŸŽ¯ AÃ§Ã£o nos resultados}
    I6 --> I7[ðŸ‘ï¸ Ver detalhes do material]
    I6 --> I8[â¬‡ï¸ Exportar resultados]
    I6 --> I9[ðŸ”™ Nova busca]
    
    I7 --> I7A[ðŸ“„ Ficha completa do material]
    I7A --> I5
    
    I8 --> E3
    
    I9 --> I1
    
    %% Fluxo de ConfiguraÃ§Ãµes
    J --> J1[ðŸ‘¤ Perfil do usuÃ¡rio]
    J1 --> J2[ðŸ“Š Plano atual e uso]
    J2 --> J3[ðŸ”‘ Chaves de API]
    J3 --> J4[ðŸ“ˆ EstatÃ­sticas de uso]
    J4 --> J5{âš™ï¸ ConfiguraÃ§Ãµes}
    J5 --> J6[ðŸ”” NotificaÃ§Ãµes]
    J5 --> J7[ðŸŽ¨ PreferÃªncias de interface]
    J5 --> J8[ðŸ“§ Alterar dados pessoais]
    J5 --> J9[ðŸ’³ Gerenciar plano]
    
    J6 --> J6A[âœ… Salvar preferÃªncias]
    J7 --> J7A[âœ… Salvar preferÃªncias]
    J8 --> J8A[âœ… Atualizar dados]
    J9 --> J9A[ðŸ’³ Tela de pagamento]
    
    J6A --> D
    J7A --> D
    J8A --> D
    J9A --> D
    
    %% Estados de erro
    G3 --> G3A[â„¹ï¸ Dicas de formato correto]
    G3A --> G1
    
    %% NotificaÃ§Ãµes do sistema
    E7 --> N1[ðŸ”” NotificaÃ§Ã£o: Download concluÃ­do]
    G12 --> N2[ðŸ”” NotificaÃ§Ã£o: Processamento finalizado]
    
    %% EstilizaÃ§Ã£o
    classDef startEnd fill:#e1f5fe
    classDef process fill:#f3e5f5
    classDef decision fill:#fff3e0
    classDef error fill:#ffebee
    classDef success fill:#e8f5e8
    
    class A,D startEnd
    class G1,G4,G8,R1,E1,H1,I1,J1 process
    class B,G2,G6,G11,R5,H3,I6,J5 decision
    class G3 error
    class E7,G12 success